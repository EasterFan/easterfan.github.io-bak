---
title: 【日记0711】多租户架构
tags: 多租户  数据库 qd
---

暂时只停留在理解阶段
<!--more-->

## 什么是多租户
多用户和多租户的区别？

就像把应用部署在阿里云，我是阿里云的一个租户，阿里云把数据库资源/空间资源出租给我，我的应用跑起来后，会有很多用户注册，这些用户是我的用户，不是阿里云的用户。  

我的应用是一个多用户系统，阿里云是一个多租户系统。  

## 多租户实现
> 多租户数据层实现有三种，独立数据库是隔离度最高的一种。  

具体实现不详。。。。

## 0709
上午继续合并昨天的 flyway 代码，合并后 pull 下来出错，因为没有安装 **Lombok** 插件，以前用git都是直接在终端下操作，今天才发现 idea 自带的版本控制功能更强大，尤其是在代码 merge 时，三屏对比，对冲突的地方看着很清晰，图形界面虽然直观，但还是要知道一次点击后 idea 为我们做了什么，比如点击 rebase，idea 在幕后先 `git stash`暂存本地操作，然后`git pull`拉下远程代码，然后`git pop` 弹出本地修改，然后检查是否有冲突，如果冲突，就手动 merge，没有冲突，直接合并。  
关于代码整洁，提交前先看各种 warning，尝试修复，然后`cmd + option + L`格式化代码。

下午 flyway 部分代码已经 merge 完成了，突然发现我并不清楚现在在做什么，我以为昨天flyway 部分已经完成了，实际上昨天我做到了安装和配置，测试了两个版本的 sql，但是蔡一直在写一个`FlywayForTenant`类，我不知道他在干什么，我知道我们在做多租户的数据库版本控制，但是我想，这个单数据库的测试已经完成，以后每多一个租户，就在flyway配置里面添加配置，但是当有一万个租户时，手动改配置的方法就不行了，

## 参考资料
-[浅谈多租户](https://www.ibm.com/developerworks/cn/java/j-lo-dataMultitenant/index.html)
